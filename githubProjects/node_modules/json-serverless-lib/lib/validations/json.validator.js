"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.JSONValidator = void 0;
var validationrule_1 = require("./validationrule");
var ruleevent_1 = require("./ruleevent");
var validationresult_1 = require("./validationresult");
var JSONValidator = /** @class */ (function () {
    function JSONValidator() {
    }
    JSONValidator.validate = function (json, specificationDependent) {
        var validationResult = new validationresult_1.ValidationResult();
        var rules = new Array();
        rules.push(new validationrule_1.IsObjectRule(json));
        rules.push(new validationrule_1.HasObjectKeyRule(json));
        rules.push(new validationrule_1.HasIdAttributeRule(json));
        if (specificationDependent) {
            rules.push(new validationrule_1.EmptyArrayRule(json));
        }
        for (var _i = 0, rules_1 = rules; _i < rules_1.length; _i++) {
            var rule = rules_1[_i];
            var results = rule.executeValidation();
            validationResult.ruleEventList.push(results);
            for (var _a = 0, _b = results.events; _a < _b.length; _a++) {
                var result = _b[_a];
                if (result.result === ruleevent_1.RuleResultSeverity.ALERT) {
                    validationResult.isValid = false;
                }
            }
        }
        return validationResult;
    };
    return JSONValidator;
}());
exports.JSONValidator = JSONValidator;
